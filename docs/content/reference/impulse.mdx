---
title: Impulse
description: Interface and Factory to create Impulse instances
---

## Overview [toc] [#overview]

<p id="overview" className="-mb-5 scroll-mt-100" />

`Impulse` is a reactive value container that stores and tracks changes to data.

```ts
import { Impulse } from "react-impulse"

interface State {
  query: Impulse<string>
}

const state: State = {
  query: Impulse("What is Declaration Merging?"),
}
```

<Callout>
  Thanks to TypeScript's [Declaration
  Merging](https://www.typescriptlang.org/docs/handbook/declaration-merging.html),
  both the `Impulse` interface and the factory function share the same name.
</Callout>

---

## `interface Impulse{:ts}` [#impulse-interface]

```ts
interface Impulse<T> {
  getValue(scope: Scope): T

  setValue(value: T): void
  setValue(transform: (currentValue: T, scope: Scope) => T): void

  clone(options?: ImpulseOptions<T>): Impulse<T>
  clone(
    transform: (value: T, scope: Scope) => T,
    options?: ImpulseOptions<T>,
  ): Impulse<T>
}
```

### `getValue(scope){:ts}` [#impulse-get-value]

Reads the current value from the impulse. The `scope` determines dependency tracking behavior.

- `scope: Scope{:ts}` - The scope for dependency tracking.

Returns the current value of type `T`.

### `setValue(value){:ts}` [#impulse-set-value]

Updates the impulse with a new value. Consumers are notified only if the new value differs according to the compare function.

- `value: T{:ts}` - The new value to set.

### `setValue(transform){:ts}` [#impulse-set-value-transform]

Updates the impulse using a transform function that receives the current value.

- `transform: (currentValue: T, scope: Scope) => T{:ts}` - Function that transforms the current value. The scope is untracked.

### `clone(options?){:ts}` [#impulse-clone]

Creates an independent copy of the impulse with the same value but separate identity and dependencies.

- `options?: ImpulseOptions<T>{:ts}` - Configuration for the cloned impulse. Inherits the original's compare function if not specified.

Returns a new `Impulse<T>` instance.

### `clone(transform, options?){:ts}` [#impulse-clone-transform]

Creates an independent copy of the impulse with a transformed value.

- `transform: (value: T, scope: Scope) => T{:ts}` - Function to transform the value during cloning. The scope is untracked.
- `options?: ImpulseOptions<T>{:ts}` - Configuration for the cloned impulse.

Returns a new `Impulse<T>` instance with the transformed value.

---

## `Impulse(initialValue, options?){:ts}` [#impulse-factory]

```ts
function Impulse<T>(initialValue: T, options?: ImpulseOptions<T>): Impulse<T>
```

Returns a new `Impulse<T>{:ts}` with the provided initial value.

- `initialValue: T{:ts}` - The starting value for the `Impulse`. Immutable values and other `Impulse`s work seamlessly.

  ```ts twoslash tab="Primitive"
  import { Impulse } from "react-impulse"

  // ---cut---
  const count = Impulse(0)
  //    ^?
  ```

  ```ts twoslash tab="Object"
  import { Impulse } from "react-impulse"

  // ---cut---
  const user = Impulse({ id: 1, name: "Alice" })
  //    ^?
  ```

  ```ts twoslash tab="Function"
  import { Impulse } from "react-impulse"
  // ---cut---
  const transformer = Impulse({ fn: (input: string) => input.trim() })
  //    ^?
  ```

  ```ts twoslash tab="Nested Impulses"
  import { Impulse } from "react-impulse"

  // ---cut---
  const cart = Impulse([
    //  ^?
    { slug: "cake", price: 39.99, amount: Impulse(1) },
    { slug: "candle", price: 0.19, amount: Impulse(12) },
  ])
  ```

  <Callout>
    Functions as `initialValue` create [Derived Impulses](/TODO). Store
    functions as values by wrapping them in an object.
  </Callout>

  <Callout type="warn">
    Mutable values might be used but be aware of [implications in React](/TODO).
  </Callout>

- `options?: ImpulseOptions<T>{:ts}` - Configuration options for the `Impulse`.
- `options?.compare?: null |{:ts}`[`Compare<T>{:ts}`](/docs/reference/compare) - The `compare` function determines when the `Impulse` considers values equal.
  When not provided or set to `null{:ts}`, it defaults to `Object.is{:ts}`.

  ```ts tab="Default compare"
  const updatedAt = Impulse(new Date(1922, 11, 30))

  updatedAt.setValue(new Date(1991, 11, 26)) // ðŸ“¬ new value - notify consumers
  updatedAt.setValue(new Date(1991, 11, 26)) // ðŸ“¬ new (but similar) value - notify consumers
  ```

  ```ts tab="Custom compare"
  const updatedAt = Impulse(new Date(1922, 11, 30), {
    compare: (left, right) => left.getTime() === right.getTime(), // [!code ++]
  })

  updatedAt.setValue(new Date(1991, 11, 26)) // ðŸ“¬ new value - notify consumers
  updatedAt.setValue(new Date(1991, 11, 26)) // ðŸ“­ same value - do not notify consumers // [!code highlight]
  ```

---

## `Impulse(){:ts}` [#impulse-factory-optional]

```ts
function Impulse<T>(): Impulse<undefined | T>
```

Returns a new `Impulse<undefined | T>{:ts}` with an initial value of `undefined{:ts}`.

```ts twoslash
import { Impulse } from "react-impulse"

// ---cut---
const value = Impulse<number>()
//    ^?
```

<Callout>
  This is a shortcut for `Impulse<undefinedÂ |Â T>(undefined){:ts}`.
</Callout>
