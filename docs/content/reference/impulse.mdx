---
title: Impulse
description: Interface and Factory to create Impulse instances
---

## Overview [toc] [#overview]

<p id="overview" className="-mb-5 scroll-mt-100" />

`Impulse` is a reactive value container that stores and tracks changes to data.

```ts
import { Impulse } from "react-impulse"

interface State {
  query: Impulse<string>
}

const state: State = {
  query: Impulse("What is Declaration Merging?"),
}
```

<Callout>
  Thanks to TypeScript's [Declaration
  Merging](https://www.typescriptlang.org/docs/handbook/declaration-merging.html),
  both the `Impulse` interface and the factory function share the same name.
</Callout>

---

## `interface Impulse<T>{:ts}` [#impulse-interface]

```ts
interface Impulse<T> {
  getValue(scope: Scope): T

  setValue(value: T): void
  setValue(transform: (currentValue: T, scope: Scope) => T): void

  clone(options?: ImpulseOptions<T>): Impulse<T>
  clone(
    transform: (value: T, scope: Scope) => T,
    options?: ImpulseOptions<T>,
  ): Impulse<T>
}
```

### `getValue(scope){:ts}` [#impulse-get-value]

### `setValue(value){:ts}` [#impulse-set-value]

### `setValue(transform){:ts}` [#impulse-set-value-transform]

### `clone(options?){:ts}` [#impulse-clone]

### `clone(transform, options?){:ts}` [#impulse-clone-transform]

---

## `interface ImpulseOptions<T>{:ts}` [#impulse-options-interface]

```ts
interface ImpulseOptions<T> {
  compare?: null | Compare<T>
}
```

The [`ImpulseOptions.compare{:ts}`](/docs/reference/compare) function determines when the `Impulse` considers values equal.<br />
When set to `null{:ts}`, it defaults to `Object.is{:ts}`.

---

## `Impulse(initialValue, options?){:ts}` [#impulse-factory]

```ts
function Impulse<T>(initialValue: T, options?: ImpulseOptions<T>): Impulse<T>
```

Creates a new `Impulse<T>{:ts}` with the provided initial value.

### `initialValue: T{:ts}`

The starting value for the `Impulse`. Immutable values and other `Impulse`s work seamlessly.

```ts twoslash tab="Primitive"
import { Impulse } from "react-impulse"

// ---cut---
const count = Impulse(0)
//    ^?
```

```ts twoslash tab="Object"
import { Impulse } from "react-impulse"

// ---cut---
const user = Impulse({ id: 1, name: "Alice" })
//    ^?
```

```ts twoslash tab="Function"
import { Impulse } from "react-impulse"
// ---cut---
const transformer = Impulse({ fn: (input: string) => input.trim() })
//    ^?
```

```ts twoslash tab="Nested Impulses"
import { Impulse } from "react-impulse"

// ---cut---
const cart = Impulse([
  //  ^?
  { slug: "cake", price: 39.99, amount: Impulse(1) },
  { slug: "candle", price: 0.19, amount: Impulse(12) },
])
```

<Callout>
  Functions as `initialValue` create [Derived Impulses](/TODO). Store functions
  as values by wrapping them in an object.
</Callout>

<Callout type="warn">
  Mutable values might be used but be aware of [implications in React](/TODO).
</Callout>

### `options: ImpulseOptions<T>{:ts}`

The [configuration object](#impulse-options-interface) for creating an `Impulse`.
The `options.compare` value defaults to `Object.is{:ts}`.

```ts tab="Default compare"
const updatedAt = Impulse(new Date(1922, 11, 30))

updatedAt.setValue(new Date(1991, 11, 26)) // ðŸ“¬ new value - notify consumers
updatedAt.setValue(new Date(1991, 11, 26)) // ðŸ“¬ new (but similar) value - notify consumers
```

```ts tab="Custom compare"
const updatedAt = Impulse(new Date(1922, 11, 30), {
  compare: (left, right) => left.getTime() === right.getTime(), // [!code ++]
})

updatedAt.setValue(new Date(1991, 11, 26)) // ðŸ“¬ new value - notify consumers
updatedAt.setValue(new Date(1991, 11, 26)) // ðŸ“­ same value - do not notify consumers // [!code highlight]
```

---

## `Impulse(){:ts}` [#impulse-factory-optional]

```ts
function Impulse<T>(): Impulse<undefined | T>
```

A shortcut to create a new `Impulse<undefinedÂ |Â T>{:ts}` with an initial value of `undefined{:ts}`.

```ts twoslash
import { Impulse } from "react-impulse"

// ---cut---
const value = Impulse<number>()
//    ^?
```
